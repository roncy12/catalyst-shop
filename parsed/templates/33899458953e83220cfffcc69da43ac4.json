{
  "components/category/session-data": "\t<script>\r\n\t\tvar _site_key = \"ctl_\";\r\n\r\n\t\tvar category_url = '{{ category.url }}';\r\n\t\tif(category_url.indexOf(\"http\") < 0 ){\r\n\t\t\tcategory_url = location.href.split('?')[0];\r\n\t\t}\r\n\t\t\r\n\t\tsessionStorage.setItem(_site_key+'category_id', '{{ category.id }}');\r\n\t\tlocalStorage.setItem(_site_key+'category_id', '{{ category.id }}');\r\n\r\n\t\tif (sessionStorage.getItem(_site_key+'category_id') !== null) {\r\n\t\t\t\tvar _ajax_category_id ='';\r\n\t\t\t\tvar\t_ajax_category_url='';\r\n\t\t\t\tvar start_time = new Date().getTime();\r\n\t\t\t\tjQuery.ajax({ url: category_url+'?limit=100&ajaxLocalStorage=Yes', \r\n\t\t\t\t\tsuccess: function(data) { \r\n\t\t\t\t\t\t\t\t_ajax_category_id = jQuery('<div />').append(jQuery(\"#ajaxLocalStorage_category_id\", data)).text();\r\n\t\t\t\t\t\t\t\t_ajax_category_url = jQuery('<div />').append(jQuery(\"#ajaxLocalStorage_category_url\", data)).text();\r\n\r\n\t\t\t\t\t\t\tif(_ajax_category_id && _ajax_category_url){\r\n\t\t\t\t\t\t\t\tvar _tmpPID = JSON.parse(_ajax_category_id);\r\n\t\t\t\t\t\t\t\tvar _tmpPURL = JSON.parse(_ajax_category_url)\r\n\t\t\t\t\t\t\t\tvar _categoryProducts = {};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < _tmpPID.length; i++)\r\n\t\t\t\t\t\t\t\t_categoryProducts[_tmpPID[i]] = { \t'prev': { 'id' : _tmpPID[i-1], 'url' : _tmpPURL[i-1] },\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'next': { 'id' : _tmpPID[i+1], 'url' : _tmpPURL[i+1] }\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem(_site_key+'category_{{ category.id }}',JSON.stringify(_categoryProducts));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar request_time = new Date().getTime() - start_time;\r\n\t\t\t\t\t\t\t\tconsole.log('updated session-data - '+request_time);\r\n\t\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});  \r\n\t\t\tvar _tmpPID = ('{{ pluck  category.products 'id'}}').split(',');\r\n\t\t\tvar _tmpPURL = ('{{ pluck  category.products 'url'}}').split(',');\r\n\t\t\tvar _categoryProducts = {};\r\n\t\t\r\n\t\t\tfor (var i = 0; i < _tmpPID.length; i++)\r\n\t\t\t_categoryProducts[_tmpPID[i]] = { \t'prev': { 'id' : _tmpPID[i-1], 'url' : _tmpPURL[i-1] },\r\n\t\t\t\t\t\t\t\t\t\t\t\t'next': { 'id' : _tmpPID[i+1], 'url' : _tmpPURL[i+1] }\t\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\tlocalStorage.setItem(_site_key+'category_{{ category.id }}',JSON.stringify(_categoryProducts));\r\n\t\t}\r\n\t\t\r\n\t</script>\n"
}
